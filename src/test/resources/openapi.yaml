openapi: 3.0.1
info:
  title: Banking API - Accounts
  version: 1.0.0
servers:
  - url: http://localhost:8080
paths:
  /accounts:
    post:
      summary: Crear cuenta
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/OpenAccountRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/AccountResponse' }
  /accounts/{id}/deposit:
    put:
      summary: Dep√≥sito
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/BalanceRequest' }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: '#/components/schemas/BalanceResponse' }
  /accounts/client/{clientId}:
    get:
      summary: Cuentas por cliente
      parameters:
        - in: path
          name: clientId
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items: { $ref: '#/components/schemas/AccountResponse' }
components:
  schemas:
    OpenAccountRequest:
      type: object
      required: [clientId, type, initialBalance]
      properties:
        clientId: { type: integer }
        type: { type: string }
        initialBalance: { type: number, format: double }
    AccountResponse:
      type: object
      properties:
        accountId: { type: integer }
        clientId: { type: integer }
        type: { type: string }
        balance: { type: number, format: double }
    BalanceRequest:
      type: object
      required: [amount]
      properties:
        amount: { type: number, format: double }
    BalanceResponse:
      type: object
      properties:
        accountId: { type: integer }
        newBalance: { type: number, format: double }
